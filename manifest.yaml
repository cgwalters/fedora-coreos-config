ref: fedora/${basearch}/coreos/eln-devel
include: manifests/fedora-coreos.yaml

# FIXME needs to be in sync with target eln
releasever: "34"

rojig:
  license: MIT
  name: fedora-coreos
  summary: Fedora CoreOS eln-devel

repos:
  - fedora-eln-baseos
  - fedora-eln-appstream

add-commit-metadata:
  fedora-coreos.stream: eln-devel

# Put this in manifest.yaml for now and we'll delete when we move to
# F33 where all of these files have been broken out to the systemd-networkd
# subpackage.
remove-from-packages:
  # We're not using networkd.
  - [systemd, /etc/systemd/networkd.conf,
              /usr/lib/systemd/systemd-networkd,
              /usr/lib/systemd/systemd-networkd-wait-online,
              /usr/lib/systemd/network/.*,
              /usr/lib/systemd/system/systemd-networkd.service,
              /usr/lib/systemd/system/systemd-networkd.socket,
              /usr/lib/systemd/system/systemd-networkd-wait-online.service]
  - [systemd-container, /usr/lib/systemd/network/.*]

postprocess:
  # Disable Zincati and fedora-coreos-pinger on non-production streams
  # https://github.com/coreos/fedora-coreos-tracker/issues/163
  - |
    #!/usr/bin/env bash
    set -xeuo pipefail
    mkdir -p /etc/fedora-coreos-pinger/config.d /etc/zincati/config.d
    echo -e '# https://github.com/coreos/fedora-coreos-tracker/issues/163\nreporting.enabled = false' > /etc/fedora-coreos-pinger/config.d/90-disable-on-non-production-stream.toml
    echo -e '# https://github.com/coreos/fedora-coreos-tracker/issues/163\nupdates.enabled = false' > /etc/zincati/config.d/90-disable-on-non-production-stream.toml
